[{"title":"Java: Compartion Violation å•é¡Œå°è¨˜","date":"","description":"","body":"å‰é™£å­å’Œæœ‹å‹è¨è«–ä¸€å€‹å¥‡å¦™çš„éŒ¯èª¤è¨Šæ¯ï¼Œèªªåœ¨åŸ·è¡Œ Collections.sort(list) æ™‚æœƒå‡ºç¾ã€‚ç¬¬ä¸€çœ¼çœ‹åˆ°é€™å€‹éŒ¯èª¤è¨Šæ¯ï¼Œè…¦ä¸­åªå†’å‡ºç„¡é™å¤šå€‹å•è™Ÿï¼Œå¿ƒä¸­åªæœ‰ OSï¼šã€Œé€™äº›å·¥ç¨‹å¸«ä»€éº¼æ™‚å€™æ‰èƒ½å¥½å¥½èªªå¥äººè©±\u0026hellip;ã€(è©±èªªä½ è‡ªå·±ä¸ä¹Ÿæ˜¯å·¥ç¨‹å¸«å˜›)ï¼Œæ²’è¾¦æ³•åªå¥½è«‹å‡º Google å¤§ç¥ï¼Œèª°å«æˆ‘å€‘éƒ½æ˜¯ Google å·¥ç¨‹å¸«å˜›ã€‚ åŸä¾†åœ¨ JDK 1.7 å¾Œå¼•å…¥äº† Tim Sort é€™å€‹æ’åºæ³•ï¼ŒTim Sort æ˜¯ Merge Sort çš„è®Šå‹ä½†æ›´æœ‰æ•ˆç‡ï¼Œè‡³æ–¼ Tim Sort å’Œ Merge Sort å…·é«”çš„æ’åºç´°ç¯€ç‚ºä½•å‰‡ä¸åœ¨æœ¬æ–‡ç¯„åœå…§(å…¶å¯¦æ˜¯æˆ‘è‡ªå·±ä¹Ÿé‚„æ²’ææ¸…æ¥š Tim Sortâ€¦)ã€‚ é›–ç„¶æ¯”è¼ƒæœ‰æ•ˆç‡ï¼Œä½†å°æ–¼æ’åºæ™‚å¦‚ä½•æ¯”è¼ƒè¢«æ’åºå…ƒç´ å¤§å°çš„é‚è¼¯æ­£ç¢ºæ€§å°±æ›´è¦æ±‚ï¼Œè¦èƒ½ä½¿ç”¨ Collections.sort çš„å…ƒç´ å¿…é ˆå¯¦ä½œ Comparable çš„ toCompare methodï¼Œæ ¹æ“š API èªªæ˜ï¼Œå¯¦ä½œ compareTo æ™‚ï¼Œæ¯”è¼ƒå…ƒç´ å¤§å°çš„é‚è¼¯å¿…é ˆç¬¦åˆä¸‹åˆ—åŸå‰‡ï¼š\n ç›¸åæ€§ï¼š A \u0026gt; B æ™‚ï¼Œå¿…é ˆç¬¦åˆ -A \u0026lt; B éå»¶æ€§ï¼šA \u0026gt; B ä¸” B \u0026gt; C æ™‚ï¼Œå¿…é ˆç¬¦åˆ A \u0026gt; C å¿…é ˆç¬¦åˆ A == B æ™‚ï¼ŒA == C ä¸” B == C  å¦‚æœæœ‰é•åé€™ 3 å€‹åŸå‰‡çš„è©±ï¼Œæœ‰å¯èƒ½æœƒåœ¨æ’åºéç¨‹ä¸­æ‹‹å‡º IllegalArgumentException: Comparison method violates its general contract! çš„éŒ¯èª¤è¨Šæ¯ï¼Œä½†é€™é‚Šè¦æ³¨æ„çš„æ˜¯ä¹Ÿåªæ˜¯æœ‰å¯èƒ½ï¼Œæœ‰æ™‚å€™æœƒåœ¨æ¯«ç„¡éŒ¯èª¤çš„æƒ…æ³ä¸‹å®Œæˆæ’åºï¼Œä½†æ­¤æ™‚ä¹Ÿåˆ¥é«˜èˆˆå¾—å¤ªæ—©ï¼Œå¤èªæœ‰äº‘ï¼šæ²‰é»˜éŒ¯èª¤æœ€å¯æ€•â€¦(æˆ‘è‡ªå·±èªªçš„â€¦)ï¼Œåœ¨é•åæ’åºåŸå‰‡çš„æƒ…æ³æ’å‡ºä¾†çš„çµæœï¼Œå¯æƒ³è€ŒçŸ¥æ’åºçš„æ­£ç¢ºæ€§æ˜¯æœ‰å•é¡Œï¼Œä½†å¯æ€•çš„æ˜¯æˆ‘å€‘é€™æ™‚å€™åè€Œä¸çŸ¥é“å•Šï¼Œæ‰€ä»¥çŸ¥éŒ¯èƒ½æ”¹å–„è«å¤§ç„‰ï¼Œä½ çœ‹èªªç¨‹å¼é‚„èƒ½å­¸åˆ°äººç”Ÿé“ç†ï¼Œå¤šåˆ’ç®— ğŸ˜†ã€‚ çŸ¥é“å‡ºç¾éŒ¯èª¤çš„å¯èƒ½åŸå› å¾Œï¼Œä¸‹ä¸€æ­¥å°±æ˜¯å¦‚ä½•æ‰¾å‡ºé‚è¼¯çš„å•é¡Œï¼Œé€™ä¸€é»å…¶å¯¦æ»¿éº»ç…©çš„ï¼Œå› ç‚ºå¯¦ä½œçš„é‚è¼¯å¯èƒ½æœ‰é¡¯è€Œæ˜“è¦‹çš„éŒ¯èª¤ï¼Œä½†ä¹Ÿå¯èƒ½è¦çœ‹å‚³å…¥çš„è³‡æ–™è€Œå®šï¼Œä¸¦ä¸æ˜¯ä»»ä½•è³‡æ–™éƒ½æœ‰å¯èƒ½è®“æ’åºé‚è¼¯é•ååŸå‰‡ï¼Œåƒé€™æ¬¡é‡åˆ°å•é¡Œçš„æ’åºé‚è¼¯ï¼š\n// Element.val æ˜¯ String public int compareTo(Elment e) { if (e == null || e.val == null) { return -1; } if (this.val == null) { return 1; } if (this.val.matches(\u0026#34;\\\\\\\\+d\u0026#34;) \u0026amp;\u0026amp; this.val.matches(\u0026#34;\\\\\\\\+d\u0026#34;)) { return Intger.parseInt(this.val) - Integer.parseInt(e.val); } return this.val.compareTo(e.val); } æˆ‘å€‘ä¾†åˆ†æä¸€ä¸‹ï¼Œé¦–å…ˆ\n å¦‚æœå’Œæ­¤å…ƒç´ æ¯”è¼ƒçš„å…ƒç´  e æ˜¯ null æˆ– e çš„ val æ˜¯ null å°±å›å‚³ 1 è¡¨ç¤º e \u0026gt; æ­¤å…ƒç´  å¦‚æœæ­¤å…ƒç´ æ¯”è¼ƒçš„å…ƒç´  e å’Œ e.val é nullï¼Œä½†æ­¤å…ƒç´ çš„ val ç‚º null å‰‡å›å‚³ 1 è¡¨ç¤º e \u0026lt; æ­¤å…ƒç´    ä¸Šé¢é€™å…©å€‹é‚è¼¯è™•ç†äº†å…ƒç´ çš„ val ç‚º null æˆ–è€…ä¸€èµ·æ¯”è¼ƒçš„å…ƒç´  e ç‚º null æˆ– e.val ç‚º null çš„ç‹€æ³ï¼Œå¾å›å‚³å€¼å¯ä»¥çœ‹å‡ºé€™å€‹é‚è¼¯æ˜¯æƒ³æŠŠ null å€¼å¾€å¾Œæ’åºã€‚\né‚£å¦‚æœæ­¤å…ƒç´ çš„ val å’Œ e.val éƒ½æœ‰å€¼å‘¢? é€™æ™‚å€™å°±å¥—ç”¨ä¸‹é¢çš„é‚è¼¯ï¼š\n ç•¶æ­¤å…ƒç´ çš„ val å’Œ e.val éƒ½æ˜¯ç´”æ•¸å­—çš„å­—ä¸²æ™‚å‰‡ä»¥è½‰æ›æˆæ•¸å­—æ¯”å¤§å° è€Œå¦‚æœæœ‰ä¸€é‚Šçš„ val å­—ä¸²ä¸æ˜¯ç´”æ•¸å­—å‰‡é€²ç›´æ¥å‘¼å« String.compareTo ä»¥å­—ä¸²çš„æ–¹å¼æ¯”è¼ƒã€‚  é€™å¹¾å€‹é‚è¼¯å„åˆ¥ä¾†çœ‹éƒ½æ²’ä»€éº¼å•é¡Œï¼Œæ•¸å­—å°±ç”¨æ•¸å­—æ¯”å¤§å°ï¼Œæœ‰ç‰½æ¶‰åˆ°å­—ä¸²å°±æ”¹ç”¨å­—ä¸²æ–¹å¼æ¯”è¼ƒï¼Œä¹Ÿæœ‰è€ƒæ…®åˆ° null çš„æƒ…æ³ï¼Œä½†æ˜¯æ—¢ç„¶æœ‰é€™ç¯‡æ–‡ç« ç•¶ç„¶å°±æ˜¯å‡ºäº‹å•¦ã€‚ å¦‚æœæ‚¨å·²ç¶“çœ‹å‡ºå•é¡Œäº†ï¼Œé‚£æˆ‘çœŸå¿ƒä½©æœï¼Œåœ¨ç•¶ä¸‹æƒ³äº†å¾ˆä¹…ä½†æŠŠé™¤éŒ¯çš„ç›®æ¨™é›†ä¸­åœ¨éŒ¯èª¤çš„ null è™•ç†é‚è¼¯æ®µè½ï¼Œç›´åˆ° YouTube ä¸Šå‰›å¥½çœ‹åˆ°æŸåŸ¸æ¼”è¬›ä¸»é¡Œå°±æ˜¯ Java çš„æ’åºå•é¡Œï¼Œè¬›è€…æä¾›äº†ä¸€å€‹æ–¹å¼ä¾† debugï¼Œåœ¨ compareTo è£¡å°‡å…ƒç´ å€¼å°å‡ºä¾†ï¼Œç›´åˆ°ç™¼ç”ŸéŒ¯èª¤è€Œåœä¸‹ä¾†çš„å‰ä¸€åˆ»æ‰€å°å‡ºä¾†çš„æ•¸å€¼æœ‰å¯èƒ½å°±æ˜¯è§¸ç™¼ç•°å¸¸é‚è¼¯çš„è³‡æ–™ï¼š\n// Element.val æ˜¯ String public int compareTo(Elment e) { System.out.println(\u0026#34;this: \u0026#34; + null + \u0026#34;, e: \u0026#34; + (e == null ? \u0026#34;null\u0026#34; : e)); System.out.println(\u0026#34;this.val: \u0026#34; + this.val + \u0026#34;, e.val: \u0026#34; + e.val); if (e == null || e.val == null) { return -1; } if (this.val == null) { return 1; } if (this.val.matches(\u0026#34;\\\\\\\\+d\u0026#34;) \u0026amp;\u0026amp; this.val.matches(\u0026#34;\\\\\\\\+d\u0026#34;)) { return Intger.parseInt(this.val) - Integer.parseInt(e.val); } return this.val.compareTo(e.val); } ç•¶çœ‹åˆ°å°å‡ºä¾†çš„è¨Šæ¯æ™‚ï¼Œçªç„¶é–“è¬é¡Œå…¨éƒ¨éƒ½è§£é–‹äº†(è«‹ä¸‹ BGM)\næˆ‘å°±æ˜¯æƒ³ç”¨åˆ°é€™å¼µåœ– æœ€çµ‚æŠ“åˆ°çš„å•é¡Œè³‡æ–™æ˜¯ 8ã€19ã€5Z(ç‚ºä¿è­·æ©Ÿå¯†ï¼Œæ­¤è³‡æ–™éå¯¦éš›ç•¶äº‹è³‡æ–™)ï¼Œé€™ä¸‰å€‹å€¼æœ‰ä»€éº¼å•é¡Œå‘¢? æˆ‘å€‘ä¾†åˆ†åˆ¥å¥—ç”¨åˆ°æ’åºé‚è¼¯ä¸Šçœ‹çœ‹ã€‚ é¦–å…ˆæ˜¯ 8 å’Œ 19ï¼Œé€™å…©å€‹å­—ä¸²éƒ½æ˜¯ç´”æ•¸å­—ï¼Œæ‰€ä»¥æˆ‘å€‘æœƒè½‰æˆ int å¾Œæ¯”è¼ƒå¤§å°ï¼Œå¾—åˆ° 8 \u0026lt; 19ã€‚ æ¥è‘—æ˜¯ 8 å’Œ 5Zï¼Œ5Z æ˜¯å­—ä¸²ï¼Œå› æ­¤æˆ‘å€‘æœƒç”¨ \u0026quot;8\u0026quot;.compareTo(\u0026quot;5Z\u0026quot;) çš„æ–¹å¼æ¯”å¤§å°ï¼Œåœ¨ Java ä¸­å­—ä¸²çš„æ’åºæ˜¯å¾æœ€å‰é¢çš„å­—å…ƒé–‹å§‹æ¯”è¼ƒå®ƒè½‰æˆ Unicode å¾Œçš„æ•¸å€¼ï¼Œè€Œ \u0026quot;8\u0026quot; \u0026gt; \u0026quot;5\u0026quot; æ‰€ä»¥å¾—åˆ° 8 \u0026gt; 5Zã€‚ æœ€å¾Œæ˜¯ 5Z å’Œ 19ï¼ŒåŒæ¨£çš„é€™è£¡ç”¨å­—ä¸²çš„æ–¹å¼æ’åºï¼Œå› ç‚º \u0026quot;5\u0026quot; \u0026gt; \u0026quot;1\u0026quot; æ‰€ä»¥å¾—åˆ° 5Z \u0026gt; 19ã€‚ æˆ‘å€‘æŠŠä¸‰å€‹çµæœæ“ºä¸€èµ·çœ‹çœ‹ï¼š\n 8 \u0026lt; 19 8 \u0026gt; 5Z 19 \u0026lt; 5Z çµæœæ˜é¡¯æ˜¯çŸ›ç›¾çš„ï¼Œå¦‚æœ 8 \u0026lt; 19 ä¸” 19 \u0026lt; 5Z é‚£æ‡‰è©²æ˜¯ 8 \u0026lt; 5z æ‰å°ï¼Œæ‰€ä»¥é€™å€‹æ’åºé‚è¼¯é•åäº†ç¬¬ä¸€é …åŸå‰‡ã€‚  ç¶“éå…©å€‹æ™šä¸Šçš„å¥®é¬¥é‹æ°£ä¸éŒ¯åœ°æ‰¾åˆ°äº†å¯¦ä½œé‚è¼¯ä¸Šçš„éŒ¯èª¤ï¼Œåœ¨ debug çš„éç¨‹ä¸­å¾ˆç¥å¥‡çš„æ˜¯åŒæ¨£çš„è³‡æ–™åœ¨æˆ‘é€™é‚Šçš„æ¸¬è©¦ç¨‹å¼ä¸­ä¸æœƒå‡ºç¾éŒ¯èª¤ï¼Œä½†æœ€çµ‚çš„æ’åºçµæœçœ‹èµ·ä¾†æ»¿å¥‡æ€ªçš„ï¼Œä¹Ÿå°è­‰äº†é–‹é ­æåˆ°çš„ï¼Œå¦‚æœæ²’æœ‰é‡åˆ°éŒ¯èª¤ä¸ä¸€å®šæ˜¯å¥½äº‹ï¼Œå› ç‚ºæ’åºçµæœå¯èƒ½ä¸æ˜¯ä½ æƒ³è¦çš„æ¨£å­ã€‚ å› ç‚ºä¹‹å‰å¾ˆå°‘è‡ªå·±å¯¦ä½œæ’åºé‚è¼¯ï¼Œé€šå¸¸ç›´æ¥ä»°è³´åŸç”Ÿçš„æ’åºé‚è¼¯æˆ–è€…ç›´æ¥åœ¨ SQL ä¸­å°±å…ˆæ’å¥½ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡é‡ä¸Šé€™å€‹å•é¡Œï¼Œç¾åœ¨æ¯”è¼ƒäº†è§£åœ¨æ’åºå¯¦ä½œä¸Šå¿…é ˆæ³¨æ„çš„é»ï¼Œè¦è€ƒæ…®å¥½ null çš„æƒ…æ³é‚„æœ‰ä¸‰åŸå‰‡çš„éƒ¨åˆ†ï¼Œå¦å¤–éå¸¸æ¨è–¦å»çœ‹çœ‹æ–‡ä¸­æåˆ°çš„æ¼”å½±ç‰‡ï¼Œè¬›è€…ç¤ºç¯„äº†å¾ˆå¤šæ’åºçš„æ–¹å¼å’Œå¯èƒ½å‡ºç¾çš„å¯¦ä½œéŒ¯èª¤ï¼Œé€£çµåœ¨ä¸‹æ–¹ã€‚\nåƒè€ƒè³‡æ–™ï¼š\n Comparison Method Violates Its General Contract! (Part 1) by Stuart Marks Comparison Method Violates Its General Contract! (Part 2) by Stuart Marks  å¦‚æœæœ‰ä»€éº¼æƒ³æ³•æˆ–éœ€è¦æŒ‡æ­£çš„åœ°æ–¹ï¼Œæ­¡è¿æ‚¨ç•™è¨€æˆ–ä¾†ä¿¡ ğŸ˜„\n","ref":"/blog/compartion-violation/"},{"title":"Use FreeMarker Template to Output JSON","date":"","description":"","body":"Use FreeMarker Template to Output JSON é¦–å…ˆæˆ‘å€‘å…ˆæº–å‚™ä¸€å€‹ FreeMarker çš„ template: test.fltj, fltj æ˜¯æˆ‘å€‘è‡ªå‰µçµ¦ JSON æ ¼å¼ tempalte çš„å‰¯æª”å:\n{ \u0026quot;name\u0026quot;: \u0026quot;test\u0026quot;, ${content} } ${content} å°±æ˜¯æˆ‘å€‘ç­‰æœƒå…’è¦å‹•æ…‹è¨­ç½®çš„éƒ¨åˆ†ã€‚\næ¥è‘—æˆ‘å€‘éœ€è¦å»ºç«‹ FreeMarker çš„ Configruationï¼Œé€™å€‹ Configuration ç†è«–ä¸Šåªéœ€è¦å»ºç«‹ä¸€å€‹ï¼š\nConfiguration configuration = new Configuration(Configuration.VERSION_2_3_25); // é€™è£¡è¨­å®š JSON ç¯„æœ¬çš„è·¯å¾‘  configuration.setClassForTemplateLoading(this.getClass(), \u0026#34;/templates/json-templates\u0026#34;); configuration.setDefaultEncoding(\u0026#34;UTF-8\u0026#34;); configuration.setTemplateExceptionHandler(TemplateExceptionHandler.RETHROW_HANDLER); configuration.setLogTemplateExceptions(false); é€™è£¡æˆ‘å€‘ä½¿ç”¨ jackson é€™å€‹ library ä¾†å¹«æˆ‘å€‘æŠŠ Java ç‰©ä»¶è½‰æˆ JSON æ ¼å¼çš„å­—ä¸²ï¼š\nMap\u0026lt;String, Object\u0026gt; data = new HashMap\u0026lt;\u0026gt;(); data.put(\u0026#34;text\u0026#34;, \u0026#34;test message\u0026#34;); data.put(\u0026#34;age\u0026#34;, 23); data.put(\u0026#34;boolean\u0026#34;, true); ObjectMapper mapper = new ObjectMapper(); // writerWithDefaultPrettyPrinter() æœƒæ’ç‰ˆè¼¸å‡ºçš„çµæœ String jsonString = mapper.writerWithDefaultPrettyPrinter().writeValueAsString(data); æœ€å¾Œæˆ‘å€‘æŠŠå¾—åˆ°çš„ JSON å­—ä¸²æ›¿æ›æ‰ ${content} çš„éƒ¨åˆ†ï¼š\nMap\u0026lt;String, String\u0026gt; content = new HashMap\u0026lt;\u0026gt;(); content.put(\u0026#34;content\u0026#34;, jsonString); Writer writer = new StringWriter(); Template template = configuration.getTemplate(\u0026#34;test.fltj\u0026#34;); template.process(content, writer); é€™æ¨£å°±æœƒæŠŠæ›¿æ›å¾Œçš„ JSON è¼¸å‡ºåˆ° StringWriter ä¸­ã€‚\nä½†å› ç‚º FreeMarker é è¨­æœƒ escape ç‰¹æ®Šå­—å…ƒï¼Œä¾‹å¦‚ \u0026amp; æœƒæ”¹æˆ \u0026amp;amp;ï¼Œ\u0026quot; æœƒæ”¹æˆ \u0026amp;quot;ï¼Œæ‰€ä»¥ç•¶æˆ‘å€‘è¦ç”¨å‹•æ…‹ç”¢ç”Ÿçš„ JSON å­—ä¸²æ›¿æ›æ‰ ${content} æ™‚ï¼Œè¼¸å‡ºçš„å…§å®¹ä¸­çš„ \u0026quot; éƒ½æœƒè¢«æ”¹æˆ \u0026amp;quot;ï¼ŒFreeMarker å…¶å¯¦é‡å°ä¸åŒé¡å‹çš„è¼¸å‡ºæœ‰å…§å»ºçš„ä¸€äº›æ ¼å¼é¡åˆ¥é è¨­æ˜¯å¦è¦ escape çš„è¡Œç‚ºè¨­å®šï¼Œè€Œ JSON æ ¼å¼çš„é è¨­æ ¼å¼é¡åˆ¥æ˜¯ä¸æœƒ escape çš„ï¼Œå› æ­¤æˆ‘å€‘è¦åšçš„æ˜¯å‘Šè¨´ FreeMarker åªè¦ template å‰¯æª”åæ˜¯ json å°±å¥—ç”¨ JSON æ ¼å¼çš„è¡Œç‚ºï¼Œé€™è£¡è¦ç”¨åˆ° TemplateConfigurationï¼š\nTemplateConfiguration jsonConfiguration = new TemplateConfiguration(); // JSONOutputFormat.INSTANCE å³ JSON æ ¼å¼çš„è™•ç†, ä¸æœƒå» escape æ‰ç‰¹æ®Šå­—å…ƒ jsonConfiguration.setOutputFormat(JSONOutputFormat.INSTANCE); configuration.setTemplateConfigurations( new FirstMatchTemplateConfigurationFactory( new ConditionalTemplateConfigurationFactory( // é€™è£¡è¨­å®šå‰¯æª”åæ˜¯ fltj å°±å¥—ç”¨ JSON æ ¼å¼è¨­å®š  new FileExtentionMatcher(\u0026#34;fltj\u0026#34;), jsonConfiguration) ) ) ) é€™æ¨£è¼¸å‡ºçš„æœ€çµ‚çµæœ JSON å°±ä¸æœƒ escape ç‰¹æ®Šå­—å…ƒäº†ã€‚\nåƒè€ƒè³‡æ–™ï¼š\n Apache FreeMarker document: Output formats Apache FreeMarker document: Associating output formats with templates  å¦‚æœæœ‰ä»€éº¼æƒ³æ³•æˆ–éœ€è¦æŒ‡æ­£çš„åœ°æ–¹ï¼Œæ­¡è¿æ‚¨ç•™è¨€æˆ–ä¾†ä¿¡ ğŸ˜„\n","ref":"/blog/freemarker-json/"},{"title":"Leetcode 136. Single Number","date":"","description":"","body":"LeetCode 136. Single Number Easy\né¡Œç›® Given a non-empty array of integers, every element appears twice except for one. Find that single one.\nNote:\nYour algorithm should have a linear runtime complexity. Could you implement it without using extra memory?\nExample 1:\nInput: [2,2,1] Output: 1 Example 2:\nInput: [4,1,2,1,2] Output: 4 è§£æ±ºæ–¹æ³• 1 (My Own Solution) ç”¨æœ€ç¬¨çš„æš´åŠ›æ–¹å¼æ¯æ¬¡å– 1 å€‹å…ƒç´ å’Œå®ƒä»¥å¤–çš„å…ƒç´ æ¯”å°, æ¯”åˆ°é‡è¤‡çš„å°±è·³å‡ºè©²æ¬¡è¿´åœˆç›´åˆ°æ‰¾åˆ°æ²’é‡è¤‡çš„ã€‚ é€™é¡Œå¦‚æœåªæ˜¯è¦æ±‚è§£çš„è©±å¾ˆç°¡å–®ï¼Œé™¤äº†ç”¨å·¢ç‹€å›åœˆå¤–ï¼Œé‚„å¯ä»¥éæ­·é™£åˆ—ç”¨ Map è¨˜éŒ„å…ƒç´ å‡ºç¾å€‹æ¬¡æ•¸å¾Œï¼Œå†å¾ Map ä¸­æ‰¾å‡ºåªç¾åœ¨ä¸€æ¬¡çš„å…ƒç´ ï¼Œä½†é€™äº›ç°¡å–®çš„è§£æ³•éƒ½ä¸ç¬¦åˆé¡å¤–çš„è¦æ±‚ï¼Œä¹Ÿå°±æ˜¯å¿…é ˆåœ¨ $O(N)$ çš„æ™‚é–“è¤‡é›œåº¦ä¸‹ä¸ä½¿ç”¨é¡å¤–çš„ç©ºé–“ï¼Œæ‰€ä»¥å°±ä¸åˆ—å‡ºå…¶ä»–é€™é¡ç°¡å–®è§£æ³•äº†ã€‚\nJava Code class Solution { public int singleNumber(int[] nums) { int singleNumber = nums[0]; for (int i = 0; i \u0026lt; nums.length; i++) { boolean duplicated = false; // æ¨™è¨˜æ­¤æ¬¡æ¯”å°æ˜¯å¦æœ‰é‡è¤‡å…ƒç´   singleNumber = nums[i]; for (int j = 0; j \u0026lt; nums.length; j++) { if (i == j) { // index ç›¸åŒè¡¨ç¤ºç‚ºåŒå€‹å…ƒç´ , ä¸ç”¨æ¯”å°  continue; } else if (nums[i] == nums[j]) { // æ¯”å°åˆ°é‡è¤‡çš„å°±å¯ä»¥è·³å‡ºæ¸›å°‘æ™‚é–“æ¶ˆè€—  duplicated = true; break; } } if (duplicated) { continue; } else { break; } } return singleNumber; } } è§£æ±ºæ–¹æ³•2 (LeeCode Solution) å°ä¸ç†Ÿæ‚‰ä½å…ƒé‹ç®—çš„æˆ‘ä¾†èªªï¼Œé€™å€‹è§£æ³•çœŸçš„æ˜¯æƒ³ç ´é ­ä¹Ÿæƒ³ä¸åˆ°çš„æ–¹æ³•ï¼Œåªèƒ½èªªçœŸçš„é€éé€™é¡Œäº†è§£åˆ°äº†ä½å…ƒé‹ç®—çš„ç‰¹æ®Šæ€§è³ªã€‚ æ­¤è§£æ³•ä½¿ç”¨äº† XOR é‹ç®—ä¾†å¾—åˆ°ç­”æ¡ˆï¼ŒXOR æœ‰ä¸‹åˆ—æ€§è³ªï¼š\n å¦‚æœç”¨ 0 å’Œå…¶ä»–æ•¸å­—ä½œ XOR é‹ç®—å‰‡å¾—åˆ°åŸæ•¸å­—ï¼š $a âŠ• 0 = a$ å¦‚æœç”¨ç›¸åŒæ•¸å­—åš XOR é‹ç®—å‰‡å¾—åˆ° 0ï¼š $a âŠ• a = 0$  å› ç‚º XOR é‹ç®—å…·æœ‰äº¤æ›å¾‹ï¼Œæ‰€ä»¥é †åºå¯ä»¥äº¤æ›ï¼Œå› æ­¤å¯ä»¥æŠŠæ‰€æœ‰æ•¸å­—ä¾åºåš XOR é‹ç®—ï¼Œæœ€å¾Œç•™ä¸‹çš„å³ç‚ºéé‡è¤‡æ•¸å­—ï¼š\n$a âŠ• b âŠ• a = ( a âŠ• a ) âŠ• b = 0 âŠ• b = b$\nä»¥é¡Œç›® [4,1,2,1,2] ç‚ºä¾‹ï¼š\n\\begin{align} \u0026amp;4 âŠ• 1 âŠ• 2 âŠ• 1 âŠ• 2 âŠ• 1\\newline \u0026amp;= 1 âŠ• 1 âŠ• 2 âŠ• 2 âŠ• 4\\newline \u0026amp;= 0 âŠ• 2 âŠ• 2 âŠ• 4\\newline \u0026amp;= 2 âŠ• 2 âŠ• 4\\newline \u0026amp;= 0 âŠ• 4\\newline \u0026amp;= 4\\newline \\end{align}\nJava Code class Solution { public int singleNumber(int[] nums) { int result = 0; for (int i : nums) { result ^= i; } return result; } } å¦‚æœæœ‰ä»€éº¼æƒ³æ³•æˆ–éœ€è¦æŒ‡æ­£çš„åœ°æ–¹ï¼Œæ­¡è¿æ‚¨ç•™è¨€æˆ–ä¾†ä¿¡ ğŸ˜„\n","ref":"/blog/leetcode-136/"},{"title":"LeetCode 104. Maximum Depth of Binary Tree","date":"","description":"","body":"LeetCode 104. Maximum Depth of Binary Tree Easy\né¡Œç›® Given a binary tree, find its maximum depth.\nThe maximum depth is the number of nodes along the longest path from the root node down to the farthest leaf node.\nNote: A leaf is a node with no children.\nExample:\nGiven binary tree [3,9,20,null,null,15,7],\n 3 / \\ 9 20 / \\ 15 7 return its depth = 3.\nè§£æ±ºæ–¹æ³• 1 (My Own Solution) æˆ‘å€‘ç”¨ 2 å€‹è®Šæ•¸åˆ†åˆ¥è¨˜éŒ„ç›®å‰æ‰€åœ¨çš„å±¤æ•¸å’Œç›®å‰åˆ°éçš„æœ€å¤§å±¤æ•¸ï¼Œæ¯åˆ°ä¸€å±¤æ™‚å¦‚æœç›®å‰æ‰€åœ¨çš„å±¤æ•¸å¤§æ–¼åˆ°éçš„æœ€å¤§å±¤æ•¸å°±æ›´æ–°æœ€å¤§å±¤æ•¸ã€‚\nJava Code /** * Definition for a binary tree node. * public class TreeNode { * int val; * TreeNode left; * TreeNode right; * TreeNode(int x) { val = x; } * } */ class Solution { public int maxDepth(TreeNode root) { int depth = 0; // è¨˜éŒ„ç›®å‰æ‰€åœ¨ node çš„æ·±åº¦  int maxDepth = 0; // è¨˜éŒ„ç›®å‰æ‰€åˆ°æœ€æ·±çš„æ·±åº¦  int[] tuple = new int[]{depth, maxDepth}; recTraverse(root, tuple); return tuple[1]; } private void recTraverse(TreeNode root, int[] tuple) { if (root == null) { return; } // recTraverse æ¯å‘¼å«ä¸€æ¬¡è¡¨ç¤ºåˆ°æ–°çš„ä¸€å±¤æ·±åº¦æ‰€ä»¥ depth + 1  tuple[0]++; // å¦‚æœç›®å‰åˆ°é”çš„ depth \u0026gt; maxDepth, maxDepth ç”¨æ–°çš„ depth å–ä»£  if (tuple[0] \u0026gt; tuple[1]) { tuple[1] = tuple[0]; } if (root.left == null \u0026amp;\u0026amp; root.right == null) { return; } if (root.left != null) { recTraverse(root.left, tuple); // å› ç‚ºå¾ä¸‹ä¸€å±¤å›ä¾†, æ‰€ä»¥ depth - 1  tuple[0]--; } if (root.right != null) { recTraverse(root.right, tuple); // å› ç‚ºå¾ä¸‹ä¸€å±¤å›ä¾†, æ‰€ä»¥ depth - 1  tuple[0]--; } } } Go Code /** * Definition for a binary tree node. * type TreeNode struct { * Val int * Left *TreeNode * Right *TreeNode * } */ func maxDepth(root *TreeNode) int { if root == nil { return 0 } maxDepth := recMaxDepth(root, 0, 0) return maxDepth } func recMaxDepth(node *TreeNode, currentDepth int, maxDepth int) int { currentDepth++ if currentDepth \u0026gt; maxDepth { maxDepth = currentDepth } if (node.Left == nil \u0026amp;\u0026amp; node.Right == nil) { return maxDepth } if (node.Left != nil) { maxDepth = recMaxDepth(node.Left, currentDepth, maxDepth) } if (node.Right != nil) { maxDepth = recMaxDepth(node.Right, currentDepth, maxDepth) } return maxDepth } å¦‚æœæœ‰ä»€éº¼æƒ³æ³•æˆ–éœ€è¦æŒ‡æ­£çš„åœ°æ–¹ï¼Œæ­¡è¿æ‚¨ç•™è¨€æˆ–ä¾†ä¿¡ ğŸ˜„\n","ref":"/blog/leetcode-104/"},{"title":"H2 Database and SQL Alias Column Name","date":"","description":"","body":"æœ‹å‹å•äº†ä¸€å€‹å¥‡å¦™çš„ç‹€æ³ï¼Œä¸‹é¢é€™å€‹ Spring JPA çš„ NativeQuery å›å‚³çš„ column name æ‡‰è©²æ˜¯ as ä¹‹å¾Œçš„åç¨± (ä»¥ä¸‹ç‚ºæ¸¬è©¦çš„ NativeQueryï¼Œéæœ‹å‹å¯¦éš›åŸ·è¡Œçš„ SQL)ï¼š\nString sql = \u0026#34;select Name as Name, SeqNo as SeqNo from Test where Name = :name\u0026#34;; List\u0026lt;Tuple\u0026gt; result = entityManager.createNativeQuery(sql, Tuple.class).setParameter(\u0026#34;name\u0026#34;, name) .getResultList(); return result; ä¹Ÿå°±æ˜¯ Name å’Œ SeqNoï¼Œä½†è·‘å‡ºä¾†çš„çµæœå»æ˜¯å…¨å¤§å¯«çš„ NAME å’Œ SEQNOï¼š\nè€Œä¸”æˆ‘ä½¿ç”¨ SQLServer æ¸¬è©¦æ™‚ç„¡æ³•é‡ç¾é€™å€‹ç‹€æ³ã€‚ä¸€é–‹å§‹ä»¥ç‚ºæ˜¯ä¸æ˜¯ Spring JPA çš„è¨­å®šå•é¡Œï¼Œä½† Google å¤§ç¥æ²’æœ‰é™ä»€éº¼ç¥æ—¨ï¼Œç¿»äº† Spring JPA çš„æ–‡ä»¶ä¹Ÿæ²’çœ‹åˆ°ä»€éº¼ç›¸é—œçš„è¨­å®šï¼Œæƒ³èªªåªå¥½ç”¨ debug æ¨¡å¼ä¾†è¿½è¹¤ä¸€ä¸‹åˆ°åº•åŸ·è¡Œéç¨‹ä¸­æ˜¯ä¸æ˜¯æœ‰ä»€éº¼åœ°æ–¹æœƒå»ä¿®æ”¹ alias column nameã€‚ åœ¨è¿½è¹¤çš„éç¨‹ä¸­ï¼Œçªç„¶çœ‹åˆ°é€™è¡Œï¼š\né›–ç„¶å’ŒåŸ·è¡Œéç¨‹ç„¡é—œ ğŸ˜…ï¼Œä½† factory.getJdbcServices().getDialect() è®“æˆ‘æƒ³åˆ°æœ‹å‹ç”¨çš„æ˜¯ H2 Databaseï¼Œé¦¬ä¸Šå»å®˜ç¶²æŸ¥äº†ä¸€ä¸‹ç™¼ç¾æœç„¶æ˜¯å› ç‚º H2 é è¨­å°æ–¼æ²’æœ‰ä½¿ç”¨ \u0026quot;\u0026quot; æ‹¬èµ·ä¾†çš„æ¬„ä½åç¨±éƒ½æœƒä¾è¨­å®šè½‰æˆå…¨å¤§å¯«æˆ–å…¨å°å¯«ï¼š\n Name With default settings unquoted names are converted to upper case. There is no maximum name length.\nIdentifiers in H2 are case sensitive by default. Because unquoted names are converted to upper case, they can be written in any case anyway. When both quoted and unquoted names are used for the same identifier the quoted names must be written in upper case. Identifiers with lowercase characters can be written only as a quoted name, they aren\u0026rsquo;t accessible with unquoted names.\nIf DATABASE_TO_UPPER setting is set to FALSE the unquoted names aren\u0026rsquo;t converted to upper case.\nIf DATABASE_TO_LOWER setting is set to TRUE the unquoted names are converted to lower case instead.\nIf CASE_INSENSITIVE_IDENTIFIERS setting is set to TRUE all identifiers are case insensitive.\n æ‰€ä»¥å¦‚æœè¦ä¿æŒ SQL ä¸­çš„å¤§å°å¯«å¿…é ˆç”¨ \u0026quot;\u0026quot; æ‹¬èµ·ä¾†ï¼š\n Quoted Name | \u0026quot; anything \u0026quot; |\nCase of characters in quoted names is preserved as is. Such names can contain spaces. There is no maximum name length. Two double quotes can be used to create a single double quote inside an identifier. With default settings identifiers in H2 are case sensitive.\nExample:\n\u0026ldquo;FirstName\u0026rdquo;\n å› æ­¤å¦‚æœä¸Šé¢çš„ NativeQuery æ”¹å¯«æˆï¼š\nString sql = \u0026#34;select Name as \\\u0026#34;Name\\\u0026#34;, SeqNo as \\\u0026#34;SeqNo\\\u0026#34; from Test where Name = :name\u0026#34;; List\u0026lt;Tuple\u0026gt; result = entityManager.createNativeQuery(sql, Tuple.class).setParameter(\u0026#34;name\u0026#34;, name) .getResultList(); return result; å°±å¯ä»¥æ­£å¸¸å›å‚³ Name å’Œ SeqNoï¼š\nå…¶å¯¦é€™ä»¶äº‹ä¹Ÿè®“æˆ‘åœ¨æ€è€ƒï¼Œä½¿ç”¨åƒ H2 é€™æ¨£çš„ Memory Database é›–ç„¶å¯ä»¥åŠ é€Ÿæ¸¬è©¦ï¼Œä½†ç•¢ç«Ÿå®ƒå’Œæ­£å¼ç·šä¸Šçš„è³‡æ–™åº«ä¸åŒï¼Œé€™æ¨£çš„è©±é€™äº›æ¸¬è©¦æ˜¯å¦èƒ½çœŸå¯¦åæ˜ å‡ºå¯¦éš›çš„ç‹€æ³å‘¢?æˆ–è€…åœ¨ Unit Test æ™‚ç›´æ¥ä½¿ç”¨å¦‚ DBUnit é€™é¡çš„æ¨¡æ“¬å‡è³‡æ–™ï¼Œåæ­£ä½¿ç”¨ H2 æ¨¡æ“¬çš„ä¹Ÿä¸€æ¨£åªæ˜¯å‡è³‡æ–™ï¼Œè€Œåœ¨ Integration Test æ™‚ä½¿ç”¨å’Œæ­£å¼ç’°å¢ƒç›¸åŒçš„è³‡æ–™åº«é€™æ¨£æ‰æ›´æœ‰æ„ç¾©ä¹Ÿä¸ä¸€å®š?\nå¦‚æœæœ‰ä»€éº¼æƒ³æ³•æˆ–éœ€è¦æŒ‡æ­£çš„åœ°æ–¹ï¼Œæ­¡è¿æ‚¨ç•™è¨€æˆ–ä¾†ä¿¡ ğŸ˜„\n","ref":"/blog/sql-and-h2-db/"},{"title":"LeetCode 55. Jump Game","date":"","description":"","body":"LeetCode 55. Jump Game Medium\nGiven an array of non-negative integers nums, you are initially positioned at the first index of the array.\nEach element in the array represents your maximum jump length at that position.\nDetermine if you are able to reach the last index.\nExample 1:\nInput: nums = [2,3,1,1,4] Output: true Explanation: Jump 1 step from index 0 to 1, then 3 steps to the last index. Example 2:\nInput: nums = [3,2,1,0,4] Output: false Explanation: You will always arrive at index 3 no matter what. Its maximum jump length is 0, which makes it impossible to reach the last index. Constraints:\n 1 \u0026lt;= nums.length \u0026lt;= 104 0 \u0026lt;= nums[i] \u0026lt;= 105  è§£æ±ºæ–¹æ³• 1 (My Own Solution) æ ¹æ“šé¡Œç›®çš„èªªæ˜ï¼Œæˆ‘å€‘å¾ç¬¬ 1 å€‹ index å‡ºç™¼ï¼Œå…¶æ•¸å­—ç‚ºå¯èµ°çš„æ­¥æ•¸ï¼Œæ‰€ä»¥åéä¾†å¦‚æœæˆ‘å€‘å¾æœ€å¾Œä¸€å€‹ index é–‹å§‹å¾€å‰ï¼Œåªè¦å‰ 1 å€‹ index çš„å…ƒç´ ä¹Ÿå°±æ˜¯å¯èµ°çš„æ­¥æ•¸å¤§æ–¼æˆ–ç­‰æ–¼å…©å€‹ index é–“çš„è·é›¢å°±è¡¨ç¤ºå¯ä»¥æœ‰è¾¦æ³•èµ°åˆ°ä¸‹ä¸€å€‹ indexï¼Œæˆ‘å€‘å°±å¯ä»¥å†å¾€å‰èµ°ã€‚ ä»¥ Example 1 ç‚ºä¾‹ï¼š\n index 3 çš„æ­¥æ•¸ç‚º 1ï¼Œç­‰æ–¼ index 3 åˆ° index 4 (åŒæ™‚ä¹Ÿæ˜¯çµ‚é»)çš„è·é›¢ 1 è¡¨ç¤ºæœ‰è¾¦æ³•èµ°åˆ°çµ‚é»ï¼Œæ‰€ä»¥æˆ‘å€‘å¯ä»¥å†å¾€å‰ä¸€å€‹ index æª¢æŸ¥ã€‚ index 2 çš„æ­¥æ•¸ç‚º 1ï¼Œç­‰æ–¼ index 2 åˆ° index 3 çš„è·é›¢ 1ï¼Œå†å¾€å‰ä¸€å€‹ indexã€‚ index 1 çš„æ­¥æ•¸ç‚º 3 å¤§æ–¼ index 1 åˆ° index 2 çš„è·é›¢ 1ï¼Œå†å¾€å‰ä¸€å€‹ indexã€‚ index 0 çš„æ­¥æ•¸ç‚º 2 å¤§æ–¼ index 0 åˆ° index 1 çš„è·é›¢ 1ï¼Œå› ç‚ºå·²ç¶“èµ°åˆ°èµ·é»äº†ï¼Œæ‰€ä»¥ Example 1 çš„é™£åˆ—å¯ä»¥å¾èµ·é»èµ°åˆ°çµ‚é»ã€‚  åŒæ¨£çš„é‚è¼¯å¥—ç”¨åˆ° Exmaple 2 ä¸Š:\n index 3 çš„æ­¥æ•¸ç‚º 0 å°æ–¼ index 3 åˆ° index 4 çš„è·é›¢ 1ï¼Œä½†å› ç‚ºåœ¨ index 3 ä¹‹å‰é‚„æ˜¯å¯èƒ½æœ‰èƒ½èµ°åˆ° index 4 çš„æ­¥æ•¸ï¼Œæ‰€ä»¥æˆ‘å€‘ç¹¼çºŒå¾€å‰æª¢æŸ¥ã€‚ index 2 çš„æ­¥æ•¸ç‚º 1 å°æ–¼ index 2 åˆ° index 4 çš„è·é›¢ 2 å†å¾€å‰ index 1 çš„æ­¥æ•¸ç‚º 2 å°æ–¼ index 1 åˆ°index 4 çš„è·é›¢ 3 å†å¾€ index 0 çš„æ­¥æ•¸ç‚º 3 å°æ–¼ index 0 åˆ° index 4 çš„è·é›¢ 4ï¼Œå› ç‚ºå·²ç¶“æª¢æŸ¥åˆ°èµ·é»äº†ï¼Œæ‰€ä»¥ Example 2 çš„é™£åˆ—æ²’è¾¦æ³•å¾èµ·é»èµ°åˆ°çµ‚é»ã€‚  Java Code class Solution { public boolean canJump(int[] nums) { // è™•ç†é™£åˆ—é•·åº¦ç‚º 1 æ™‚çš„ç‰¹æ®Šæƒ…æ³  if (nums.length == 1) { return true; } int i = nums.length - 2; // å…©å€‹ index é–“çš„è·é›¢  int distance = 1; // å¾å€’æ•¸ç¬¬ 2 å€‹ index é–‹å§‹æª¢æŸ¥  for (; i \u0026gt;= 0; i--) { if (nums[i] \u0026gt;= distance) { // å¦‚æœèµ°åˆ°èµ·é»è¡¨ç¤ºæ­¤é™£åˆ—å¯ä»¥å¾èµ·é»èµ°åˆ°çµ‚é»  if (i == 0) { return true; } // ç•¶è¦æª¢æŸ¥ä¸‹ä¸€å€‹ index æ™‚ï¼Œæª¢æŸ¥è·é›¢é‡è¨­ç‚º 1  distance = 1; continue; } // å¦‚æœæ­¤ index çš„æ­¥æ•¸ä¸æ»¿è¶³æ¢ä»¶ï¼Œå‰‡æª¢æŸ¥ä¸‹ä¸€å€‹ index æ™‚ï¼Œæª¢æŸ¥è·é›¢è¦åŠ  1  distance++; } return i == 0; } }  æ™‚é–“è¤‡é›œåº¦ï¼šå› ç‚ºæ˜¯éæ­·é™£åˆ—ï¼Œæ‰€ä»¥æ™‚é–“è¤‡é›œåº¦ç‚º $O(N)$  è§£æ³• 2 (LeetCode Forum Solution) è§£æ³•æ–¹å¼å’Œè§£æ³• 1 ç›¸åŒï¼Œä½†ç¨‹å¼ç¢¼ç°¡æ½”æ›´å¤šã€‚åŸºæœ¬ä¸Šæ˜¯å°‡è§£æ³• 1 ä¸­çš„ index çš„å…ƒç´ æ˜¯å¦å¤§æ–¼æˆ–ç­‰æ–¼ distance çš„è¨ˆç®—ç›´æ¥ç”¨ index + è©² index çš„å…ƒç´  æ˜¯å¦å¤§æ–¼æˆ–ç­‰æ–¼å¾Œä¸€å€‹ index å–ä»£ï¼ŒåŒæ™‚æœƒç”¨ 1 å€‹ pointer last æŒ‡å‘å¯ä»¥æˆåŠŸèµ°åˆ°å¾Œä¸€å€‹ index çš„ index ç‚ºä½•ï¼Œå¦‚æœæœ€å¾Œ last æŒ‡åˆ° index 0 è¡¨ç¤ºå¯ä»¥å¾èµ·é»èµ°åˆ°çµ‚é»ã€‚\nJava Code class Solution { public boolean canJump(int[] nums) { int last = nums.length - 1; for (int i = nums.length - 2; i \u0026gt;= 0; i--) { // index + index çš„å…ƒç´ å¦‚æœ \u0026gt;= å¾Œ 1 å€‹ index, è¡¨ç¤ºå¯ä»¥å¾é€™é‚Šèµ°åˆ°å¾Œä¸€å€‹ index çš„åœ°æ–¹, æ‰€ä»¥æˆ‘å€‘å¯ä»¥ç¹¼çºŒå¾€å‰æª¢æŸ¥  if (i + nums[i] \u0026gt;= last) { last = i; } } return last == 0; } }  æ™‚é–“è¤‡é›œåº¦ï¼šå› ç‚ºéœ€è¦éæ­·é™£åˆ—ï¼Œæ‰€ä»¥åŒæ¨£ç‚º $O(N)$  è§£æ³• 3 (LeetCode Forum Solution) é€™å€‹è§£æ³•çš„æ€è€ƒæ–¹å¼æ˜¯ï¼Œæˆ‘å€‘å¾èµ·é»é–‹å§‹è¨˜éŒ„è©² index çš„æ­¥æ•¸æœ€é å¯ä»¥åˆ°çš„ index (ç”¨è®Šæ•¸ max è¨˜éŒ„)ï¼Œç„¶å¾Œé–‹å§‹å¾€å¾Œéæ­·ï¼Œå¦‚æœä¸­é–“æœ‰ index çš„æ­¥æ•¸å¯ä»¥æŠŠ max å†å¾€æ›´å¾Œé¢æ¨é€²å°±æ›´æ–° max çš„å€¼ï¼Œä½†å¦‚æœæˆ‘å€‘åœ¨éæ­·çš„éç¨‹ä¸­æ‰€æª¢æŸ¥çš„ index å·²ç¶“è¶…å‡º max æŒ‡å‘çš„ indexï¼Œè¡¨ç¤ºæˆ‘å€‘æœ€é åªèƒ½åˆ° max æ‰€æŒ‡å‘çš„ index è€Œç„¡æ³•åˆ°é”çµ‚é»ã€‚å¦‚æœå¯ä»¥é †åˆ©éæ­·å®Œè¡¨ç¤º max æœ€çµ‚çš„æ•¸å€¼ä¸€å®šæ˜¯ç­‰æ–¼æˆ–å¤§æ–¼çµ‚é»çš„ indexã€‚ ä»¥ Example 1 ç‚ºä¾‹çš„è©±ï¼š\n é–‹å§‹ max = 0ï¼Œèµ·é» index 0 ç‚º 2 æ‰€ä»¥ max = 2 è¡¨ç¤ºæ­¤æ™‚æˆ‘å€‘æœ€é å¯ä»¥åˆ° index 2ã€‚ index 1 ç‚º 3 å¤§æ–¼ max æ‰€ä»¥æ›´æ–° max = 3 è¡¨ç¤ºæ­¤æ™‚æˆ‘å€‘æœ€é å¯ä»¥åˆ° index 3ã€‚ index 2 ç‚º 1 å°æ–¼ max æ‰€ä»¥æˆ‘å€‘å¯ä»¥ä¸ç”¨ä½¿ç”¨å®ƒã€‚ index 3 ç‚º 1 å°æ–¼ max æ‰€ä»¥æˆ‘å€‘å¯ä»¥ä¸ç”¨ä½¿ç”¨å®ƒã€‚ index 4 ç‚º 4 å¤§æ–¼ maxï¼ŒåŒæ™‚æˆ‘å€‘ä¹Ÿéæ­·åˆ°çµ‚é»äº†ï¼Œæ‰€ä»¥æˆ‘å€‘å¯ä»¥æˆåŠŸåœ°å¾èµ·é»èµ°åˆ°çµ‚é»ã€‚  ä»¥ Example 2 ç‚ºä¾‹çš„è©±ï¼š\n é–‹å§‹ max = 0ï¼Œèµ·é» index 0 ç‚º 3 æ‰€ä»¥ max = 3 è¡¨ç¤ºæ­¤æ™‚æˆ‘å€‘æœ€é å¯ä»¥åˆ° index 3ã€‚ index 1 ç‚º 2 å°æ–¼ max æ‰€ä»¥æˆ‘å€‘å¯ä»¥ä¸ç”¨ä½¿ç”¨å®ƒã€‚ index 2 ç‚º 1 å°æ–¼ max æ‰€ä»¥æˆ‘å€‘å¯ä»¥ä¸ç”¨ä½¿ç”¨å®ƒã€‚ index 3 ç‚º 0 å°æ–¼ max æ‰€ä»¥æˆ‘å€‘å¯ä»¥ä¸ç”¨ä½¿ç”¨å®ƒã€‚ index 4 ç‚º 4 ä½†å› ç‚ºæ­¤æ™‚æˆ‘å€‘éæ­·åˆ°çš„ index å·²ç¶“è¶…é max æŒ‡å‘çš„ index äº†ï¼Œè¡¨ç¤ºæˆ‘å€‘æœ€é åªèƒ½èµ°åˆ° max æŒ‡å‘çš„ index 3ï¼Œå› æ­¤ä¸å¯èƒ½å¾èµ·é»èµ°åˆ°çµ‚é»ã€‚  Java Code class Solution { public boolean canJump(int[] nums) { int max = 0; for (int i = 0; i \u0026lt; nums.length; i++) { if (i \u0026gt; max) { return false; } max = Math.max(i + nums[i], max); } return true; } }  æ™‚é–“è¤‡é›œåº¦ï¼šéœ€è¦éæ­·é™£åˆ—ï¼Œæ‰€ä»¥æ™‚é–“è¤‡é›œåº¦ç‚º $O(N)$  å¦‚æœæœ‰ä»€éº¼æƒ³æ³•æˆ–éœ€è¦æŒ‡æ­£çš„åœ°æ–¹ï¼Œæ­¡è¿æ‚¨ç•™è¨€æˆ–ä¾†ä¿¡ ğŸ˜„\n","ref":"/blog/leetcode-55/"},{"title":"LeetCode 344. Reverse String","date":"","description":"","body":"LeetCode 344. Reverse String Easy\né¡Œç›® Write a function that reverses a string. The input string is given as an array of characters char[].\nDo not allocate extra space for another array, you must do this by modifying the input array in-place with O(1) extra memory.\nYou may assume all the characters consist of printable ascii characters.\nExample 1:\nInput: [\u0026quot;h\u0026quot;,\u0026quot;e\u0026quot;,\u0026quot;l\u0026quot;,\u0026quot;l\u0026quot;,\u0026quot;o\u0026quot;] Output: [\u0026quot;o\u0026quot;,\u0026quot;l\u0026quot;,\u0026quot;l\u0026quot;,\u0026quot;e\u0026quot;,\u0026quot;h\u0026quot;] Example 2:\nInput: [\u0026quot;H\u0026quot;,\u0026quot;a\u0026quot;,\u0026quot;n\u0026quot;,\u0026quot;n\u0026quot;,\u0026quot;a\u0026quot;,\u0026quot;h\u0026quot;] Output: [\u0026quot;h\u0026quot;,\u0026quot;a\u0026quot;,\u0026quot;n\u0026quot;,\u0026quot;n\u0026quot;,\u0026quot;a\u0026quot;,\u0026quot;H\u0026quot;] è§£æ±ºæ–¹æ³•1 (My Own Solution) ç”¨å…©å€‹æŒ‡æ¨™ start å’Œ end åˆ†åˆ¥ç”±é™£åˆ—ç¬¬ä¸€å€‹å’Œæœ€å¾Œä¸€å€‹å…ƒç´ é–‹å§‹äº¤æ›ä½ç½®ï¼Œä¸¦ä¸”å½¼æ­¤æ…¢æ…¢é è¿‘ï¼Œå› ç‚ºå­—ä¸²é•·åº¦å¯èƒ½ç‚ºå¥‡æ•¸æˆ–å¶æ•¸ï¼Œæ‰€ä»¥ç›´åˆ° start \u0026gt;= end ç‚ºæ­¢ (ç•¶ç‚ºå¥‡æ•¸æ™‚ start == endï¼Œç•¶ç‚ºå¶æ•¸æ™‚å…©è€…æœƒäº¤éŒ¯æ‰€ä»¥ç”¨ start \u0026gt; end åˆ¤æ–·)ã€‚\nJava Code class Solution { public void reverseString(char[] s) { int end = s.length - 1; for (int start = 0; start \u0026lt; s.length; start++) { if (start \u0026gt;= end) { return; } char temp = s[start]; s[start] = s[end]; s[end] = temp; end--; } } } å¦‚æœæœ‰ä»€éº¼æƒ³æ³•æˆ–éœ€è¦æŒ‡æ­£çš„åœ°æ–¹ï¼Œæ­¡è¿æ‚¨ç•™è¨€æˆ–ä¾†ä¿¡ ğŸ˜„\n","ref":"/blog/leetcode-344/"},{"title":"å¾ Server ç«¯è¼¸å‡ºä¸‹è¼‰çš„æª”åå«æœ‰ä¸­æ–‡æœƒè®Šæˆäº‚ç¢¼å•é¡Œ","date":"","description":"","body":"å¾ Server ç«¯è¼¸å‡ºä¸‹è¼‰çš„æª”åå«æœ‰ä¸­æ–‡æœƒè®Šæˆäº‚ç¢¼å•é¡Œ æœ‹å‹é‡åˆ°ä¸€å€‹å•é¡Œæ˜¯å¦‚æœæª”åæœ‰ä¸­æ–‡ï¼Œåœ¨ç€è¦½å™¨ä¸‹è¼‰æ™‚æª”åæœƒè®Šæˆäº‚ç¢¼ã€‚\né¦–å…ˆï¼Œç€è¦½å™¨æ˜¯ç”¨ header ä¸­çš„ Content-Disposition=attachment;filename=${æª”å} åšç‚ºé è¨­çš„ä¸‹è¼‰æª”åï¼Œä½† header ä¸­ä¸¦ä¸æ”¯æ´ UTF-8 ç·¨ç¢¼ï¼Œæ‰€ä»¥å¦‚æœåœ¨ç¨‹å¼ä¸­ç›´æ¥æ‹¿ä¸­æ–‡æª”åæ”¾åœ¨ filename ä¸­å°±æœƒè®Šæˆäº‚ç¢¼ã€‚\nè§£æ±ºæ–¹æ³•æ˜¯å…ˆæŠŠæª”å encode æˆ URL-encoded ç·¨ç¢¼ï¼Œåœ¨ Java ä¸­å¯ä»¥ç”¨ URLEncoder è™•ç†ï¼š\nresponse.setHeader(\u0026#34;Content-Disposition\u0026#34;, \u0026#34;attachment;filename=\u0026#34; + URLEncoder.encode(fileName, \u0026#34;UTF-8\u0026#34;); å¦‚æœæœ‰ä»€éº¼æƒ³æ³•æˆ–éœ€è¦æŒ‡æ­£çš„åœ°æ–¹ï¼Œæ­¡è¿æ‚¨ç•™è¨€æˆ–ä¾†ä¿¡ ğŸ˜„\n","ref":"/blog/garbled-file-name/"},{"title":"About","date":"","description":"","body":"ä¸€åå……æ»¿å¥½å¥‡å¿ƒçš„å°å°å·¥ç¨‹å¸«ï¼Œå­¸ç¿’ç¨‹å¼å–œæ­¡äº†è§£æ¢ç©¶åŸç†ã€‚å› ç‚ºè‡ªçŸ¥ç¾æ„Ÿæ¬ çŸ¥æ‰€ä»¥èˆˆè¶£é›†ä¸­åœ¨å¾Œç«¯ç³»çµ±ä¸Šï¼Œè¦ºå¾—çœ‹åˆ°å¤§ç³»çµ±ä¸­æ¯å€‹çµ„ä»¶èƒ½å®Œç¾åœ°å¥‘åˆé‹ä½œæ˜¯ä»¶éå¸¸ç¾å¦™çš„äº‹ã€‚ é€™è£¡è¨˜éŒ„è‘—å„ç¨®å­¸ç¿’è¨˜éŒ„ã€å·¥ä½œä¸Šé‡åˆ°çš„å„ç¨®å•é¡Œå’Œè§£æ³•ï¼Œå¦‚æœæœ‰éŒ¯èª¤çš„åœ°æ–¹æ­¡è¿æŒ‡æ•™ã€‚\nEmail: blackdiz@gmail.com\nGithub: https://github.com/blackdiz\n","ref":"/about/"},{"title":"LeetCode 1. Two Sum","date":"","description":"","body":"LeetCode 1. Two Sum Easy\nGiven an array of integers, return indices of the two numbers such that they add up to a specific target.\nYou may assume that each input would have exactly one solution, and you may not use the same element twice.\nExample:\nGiven nums = [2, 7, 11, 15], target = 9, Because nums[0] + nums[1] = 2 + 7 = 9, return [0, 1]. è§£æ±ºæ–¹æ³• 1 (My Own Solution) ç›´è¦ºçš„è©±å°±æ˜¯æš´åŠ›è§£æ³•ï¼Œç”¨æ‰€æœ‰å…ƒç´ çµ„åˆå…©å…©ç›¸åŠ ç›´åˆ°æ‰¾å‡ºåŠ ç¸½ç­‰æ–¼ target ç‚ºæ­¢ã€‚\nJava Code class Solution { public int[] twoSum(int[] nums, int target) { for (int i = 0; i \u0026lt; nums.length; i++) { int num1 = nums[i]; for (int j = i + 1; j \u0026lt; nums.length; j++) { if (num1 + nums[j] == target) { return new int[]{i, j}; } } } return new int[0]; } } æ™‚é–“è¤‡é›œåº¦ï¼šæ¯å€‹å…ƒç´ éƒ½è¦éæ­·é™£åˆ—ä¸€æ¬¡ï¼Œæ‰€ä»¥æœ‰ $N$ å€‹å…ƒç´ æ™‚ç‚º $O(N^2)$ã€‚\nè§£æ±ºæ–¹æ³• 2 (My Own Solution) ä½¿ç”¨ Map å°‡ {æ•¸å­— : index} å„²å­˜èµ·ä¾†ï¼Œåœ¨éæ­·é™£åˆ—æ™‚ç›´æ¥å¾ Map å–å·®å€¼ï¼Œå¦‚æœæœ‰å–åˆ°å‰‡å›å‚³å…©è€…çš„ indexã€‚\nJava Code class Solution { public int twoSum(int[] nums, int target) { Map\u0026lt;Integer, Integer\u0026gt; records = new HashMap\u0026lt;\u0026gt;(); for (int i = 0; i \u0026lt; nums.length; i++) { records.put(nums[i], i); } for (int i = 0; i \u0026lt; nums.length; i++) { int num1 = nums[i]; int num2 = target - num1; // ç¬¬ 2 å€‹æ¢ä»¶é¿å…æ‰¾åˆ°è‡ªå·±ï¼Œä¾‹å¦‚ 6 - 3 = 3 çš„æƒ…æ³  if (records.get(num2) != null \u0026amp;\u0026amp; records.get(num2) != i) { return new int[]{i, records.get(num2)}; } } return new int[0]; } } æ™‚é–“è¤‡é›œåº¦ï¼šéæ­· 2 æ¬¡ï¼Œæ‰€ä»¥ $N$ å€‹å…ƒç´ æ™‚ç‚º $O(N)$ ç©ºé–“è¤‡é›œåº¦ï¼šéœ€è¦ç”¨ Map è¨˜éŒ„é™£åˆ—ä¸­çš„æ•¸å­—å’Œ indexï¼Œæ‰€ä»¥ç‚º $O(N)$\nè§£æ±ºæ–¹æ³• 3 (LeetCode Solution) è§£æ±ºæ–¹æ³• 2 å¯ä»¥å†é€²ä¸€æ­¥å„ªåŒ–ï¼Œå› ç‚ºæˆ‘å€‘æ˜¯ç”¨å·®å€¼å» Map ä¸­ç¢ºèªæœ‰ç„¡å’Œå·®å€¼ç›¸åŒçš„å…ƒç´ å­˜åœ¨ï¼Œæ‰€ä»¥å¦‚æœ num1 + num2 = target åœ¨é‡åˆ° num1 æ™‚ï¼Œæˆ‘å€‘å³ä½¿ç”¨å·®å€¼ num2 å–ä¸åˆ°ä¹Ÿå°‡ num1 å’Œå®ƒçš„ index å­˜å…¥ Map ä¸­ï¼Œåœ¨é‡åˆ° num2 æ™‚ç”¨å·®å€¼ num1 å°±å¯ä»¥å–åˆ° num1 çš„ indexï¼Œæ‰€ä»¥æˆ‘å€‘å¯ä»¥ä¸ç”¨å…ˆå°‡é™£åˆ—ä¸­çš„å…ƒç´ å­˜å…¥ Map ä¸­ï¼Œè€Œæ˜¯ä¸€é‚Šéæ­·ä¸€é‚Šå­˜å…¥ Mapã€‚ ä¾‹å¦‚ [2, 7, 3, 4] è€Œ target = 9ï¼Œéæ­·æ™‚å…ˆé‡åˆ° 2ï¼Œå·®å€¼ç‚º 7ï¼Œæ­¤æ™‚ Map ä¸­æ²’æœ‰ 7 ä½†æˆ‘å€‘å…ˆæŠŠ {2: 0} å­˜å…¥ Mapï¼Œè€Œç¹¼çºŒéæ­·ä¸‹å»é‡åˆ° 7ï¼Œå·®å€¼ç‚º 2ï¼Œæ­¤æ™‚æˆ‘å€‘å¯ä»¥åœ¨ Map å–åˆ° {2:0}ï¼Œæ‰€ä»¥ç­”æ¡ˆå°±æ˜¯ [1, 0]ã€‚\nJava Code class Solution { public int twoSum(int[] nums, int target) { Map\u0026lt;Integer, Integer\u0026gt; records = new HashMap\u0026lt;\u0026gt;(); for (int i = 0; i \u0026lt; nums.length; i++) { int num1 = nums[i]; int num2 = target - num1; if (records.get(num2) != null) { return new int[]{i, records.get(num2)}; } records.put(num1, i); } return new int[0]; } } Go Code func twoSum(nums []int, target int) []int { record := make(map[int]int) for i := 0; i \u0026lt; len(nums); i++ { n1, ok := record[target - nums[i]]; if (ok) { return []int{i, n1} } record[nums[i]] = i } return []int{} } æ™‚é–“è¤‡é›œåº¦ï¼šéœ€è¦éæ­· $N$ å€‹å…ƒç´ ï¼Œæ‰€ä»¥ç‚º $O(N)$ ç©ºé–“è¤‡é›œåº¦ï¼šéœ€è¦å»ºç«‹å„²å­˜ $N$ å€‹å…ƒç´ çš„ Mapï¼Œæ‰€ä»¥ç‚º $O(N)$\nå¦‚æœæœ‰ä»€éº¼æƒ³æ³•æˆ–éœ€è¦æŒ‡æ­£çš„åœ°æ–¹ï¼Œæ­¡è¿æ‚¨ç•™è¨€æˆ–ä¾†ä¿¡ ğŸ˜„\n","ref":"/blog/leetcode-1/"}]