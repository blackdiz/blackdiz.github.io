<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>server side on Blackdiz's Garage</title><link>https://blackdiz.github.io/tags/server-side/</link><description>Recent content in server side on Blackdiz's Garage</description><generator>Hugo -- gohugo.io</generator><language>zh-TW</language><lastBuildDate>Wed, 21 Jul 2021 20:28:15 +0800</lastBuildDate><atom:link href="https://blackdiz.github.io/tags/server-side/index.xml" rel="self" type="application/rss+xml"/><item><title>Linux 2ã€1ã€&amp; å’Œ ></title><link>https://blackdiz.github.io/blog/linux-redirection-operators/</link><pubDate>Wed, 21 Jul 2021 20:28:15 +0800</pubDate><guid>https://blackdiz.github.io/blog/linux-redirection-operators/</guid><description>å°è¨˜ä¸€ä¸‹ command 2&amp;gt;&amp;amp;1 &amp;gt; /dev/null å’Œ command &amp;gt; /dev/null 2&amp;gt;&amp;amp;1 çš„å·®åˆ¥ã€‚é¦–å…ˆå…ˆçœ‹ 2&amp;gt;&amp;amp;1 çš„æ„æ€ã€‚åœ¨ Linux çš„ file descriptor ä¸­ï¼Œ1 è¡¨ç¤º stdout (æ¨™æº–è¼¸å‡º) è¡¨ç¤ºç¨‹å¼åŸ·è¡Œä¸­è¼¸å‡ºè¨Šæ¯çš„åœ°æ–¹ï¼Œé è¨­ç‚º terminalã€‚è€Œ 2 è¡¨ç¤º stderr (æ¨™æº–éŒ¯èª¤è¼¸å‡º) è¡¨ç¤ºç¨‹å¼åŸ·è¡Œä¸­ç™¼ç”ŸéŒ¯èª¤æ™‚è¼¸å‡ºéŒ¯èª¤è¨Šæ¯çš„åœ°æ–¹ï¼Œé è¨­ä¹Ÿæ˜¯ terminalã€‚
&amp;gt; è¡¨ç¤ºæŠŠ &amp;gt; å‰æ–¹çš„è¼¸å‡ºéƒ½å°åˆ° &amp;gt; å¾Œæ–¹çš„ç›®æ¨™ã€‚
è€Œ &amp;gt;&amp;amp; è¡¨ç¤ºæŠŠ &amp;gt;&amp;amp; å‰çš„ file descriptor æŒ‡å‘ &amp;gt;&amp;amp; å¾Œæ–¹çš„ file descriptorï¼Œ&amp;amp; è¡¨ç¤ºç›®æ¨™æ˜¯ file descriptor è€Œä¸æ˜¯æª”æ¡ˆã€‚
/dev/null æ˜¯å€‹ç‰¹æ®Šçš„ç›®æ¨™ï¼Œä»»ä½•è¼¸å…¥åˆ°å®ƒçš„è¨Šæ¯éƒ½æœƒæ¶ˆå¤±ä¸æœƒè¼¸å‡ºåˆ°ä»»ä½•å…¶ä»–åœ°æ–¹ã€‚
åœ¨äº†è§£å„éƒ¨åˆ†çš„ä½œç”¨å¾Œï¼Œç¾åœ¨æŠŠå®ƒå€‘çµ„åˆèµ·ä¾†çœ‹ï¼Œcommand 2&amp;gt;&amp;amp;1 &amp;gt; /dev/null è¡¨ç¤ºåŸ·è¡Œ commandï¼ŒæŠŠ stderr è¼¸å‡ºçš„ç›®æ¨™æŒ‡å‘ stdout ç›®å‰è¼¸å‡ºçš„ç›®æ¨™ï¼Œå› ç‚º stdout ç›®å‰æŒ‡å‘çš„ç›®æ¨™æ˜¯ terminalï¼Œæ‰€ä»¥ stderr æŒ‡å‘çš„ç›®æ¨™å°±è®Šæˆ terminalï¼Œæœ€å¾Œ &amp;gt; /dev/null è¡¨ç¤ºæŠŠ stdout è¼¸å‡ºçš„ç›®æ¨™æŒ‡å‘ /dev/nullï¼Œæ‰€ä»¥æœ€çµ‚åŸ·è¡Œçš„çµæœå°±æ˜¯ stderr æœƒè¼¸å‡ºåˆ° terminal è€Œ stdout æœƒè¼¸å‡ºåˆ° /dev/nullã€‚ command &amp;gt; /dev/null 2&amp;gt;&amp;amp;1 å‰‡æ˜¯åŸ·è¡Œ commandï¼Œ&amp;gt; /dev/null æœƒæŠŠ stdout è¼¸å‡ºç›®æ¨™æŒ‡å‘ /dev/nullï¼Œè€Œæœ€å¾Œé¢çš„ 2&amp;gt;&amp;amp;1 æœƒå†æŠŠ stderr è¼¸å‡ºçš„ç›®æ¨™æŒ‡å‘ç›®å‰ stdout çš„è¼¸å‡ºç›®æ¨™ï¼Œæ‰€ä»¥ä¹ŸåŒæ¨£è®Šæˆ /dev/nullï¼Œå› æ­¤æœ€çµ‚åŸ·è¡Œçµæœæœƒæ˜¯ stdout å’Œ stderr éƒ½æœƒè¼¸å‡ºåˆ° /dev/null ä¸­ã€‚</description></item><item><title>Use FreeMarker Template to Output JSON</title><link>https://blackdiz.github.io/blog/freemarker-json/</link><pubDate>Tue, 06 Jul 2021 01:28:39 +0800</pubDate><guid>https://blackdiz.github.io/blog/freemarker-json/</guid><description>é¦–å…ˆæˆ‘å€‘å…ˆæº–å‚™ä¸€å€‹ FreeMarker çš„ template: test.fltj, fltj æ˜¯æˆ‘å€‘è‡ªå‰µçµ¦ JSON æ ¼å¼ tempalte çš„å‰¯æª”å:
{ &amp;quot;name&amp;quot;: &amp;quot;test&amp;quot;, ${content} } ${content} å°±æ˜¯æˆ‘å€‘ç­‰æœƒå…’è¦å‹•æ…‹è¨­ç½®çš„éƒ¨åˆ†ã€‚
æ¥è‘—æˆ‘å€‘éœ€è¦å»ºç«‹ FreeMarker çš„ Configruationï¼Œé€™å€‹ Configuration ç†è«–ä¸Šåªéœ€è¦å»ºç«‹ä¸€å€‹ï¼š
Configuration configuration = new Configuration(Configuration.VERSION_2_3_25); // é€™è£¡è¨­å®š JSON ç¯„æœ¬çš„è·¯å¾‘ configuration.setClassForTemplateLoading(this.getClass(), &amp;#34;/templates/json-templates&amp;#34;); configuration.setDefaultEncoding(&amp;#34;UTF-8&amp;#34;); configuration.setTemplateExceptionHandler(TemplateExceptionHandler.RETHROW_HANDLER); configuration.setLogTemplateExceptions(false); é€™è£¡æˆ‘å€‘ä½¿ç”¨ jackson é€™å€‹ library ä¾†å¹«æˆ‘å€‘æŠŠ Java ç‰©ä»¶è½‰æˆ JSON æ ¼å¼çš„å­—ä¸²ï¼š
Map&amp;lt;String, Object&amp;gt; data = new HashMap&amp;lt;&amp;gt;(); data.put(&amp;#34;text&amp;#34;, &amp;#34;test message&amp;#34;); data.put(&amp;#34;age&amp;#34;, 23); data.put(&amp;#34;boolean&amp;#34;, true); ObjectMapper mapper = new ObjectMapper(); // writerWithDefaultPrettyPrinter() æœƒæ’ç‰ˆè¼¸å‡ºçš„çµæœ String jsonString = mapper.</description></item><item><title>å¾ Server ç«¯è¼¸å‡ºä¸‹è¼‰çš„æª”åå«æœ‰ä¸­æ–‡æœƒè®Šæˆäº‚ç¢¼å•é¡Œ</title><link>https://blackdiz.github.io/blog/garbled-file-name/</link><pubDate>Mon, 22 Mar 2021 15:15:46 +0800</pubDate><guid>https://blackdiz.github.io/blog/garbled-file-name/</guid><description>æœ‹å‹é‡åˆ°ä¸€å€‹å•é¡Œæ˜¯å¦‚æœæª”åæœ‰ä¸­æ–‡ï¼Œåœ¨ç€è¦½å™¨ä¸‹è¼‰æ™‚æª”åæœƒè®Šæˆäº‚ç¢¼ã€‚
é¦–å…ˆï¼Œç€è¦½å™¨æ˜¯ç”¨ header ä¸­çš„ Content-Disposition=attachment;filename=${æª”å} åšç‚ºé è¨­çš„ä¸‹è¼‰æª”åï¼Œä½† header ä¸­ä¸¦ä¸æ”¯æ´ UTF-8 ç·¨ç¢¼ï¼Œæ‰€ä»¥å¦‚æœåœ¨ç¨‹å¼ä¸­ç›´æ¥æ‹¿ä¸­æ–‡æª”åæ”¾åœ¨ filename ä¸­å°±æœƒè®Šæˆäº‚ç¢¼ã€‚
è§£æ±ºæ–¹æ³•æ˜¯å…ˆæŠŠæª”å encode æˆ URL-encoded ç·¨ç¢¼ï¼Œåœ¨ Java ä¸­å¯ä»¥ç”¨ URLEncoder è™•ç†ï¼š
response.setHeader(&amp;#34;Content-Disposition&amp;#34;, &amp;#34;attachment;filename=&amp;#34; + URLEncoder.encode(fileName, &amp;#34;UTF-8&amp;#34;); å¦‚æœæœ‰ä»€éº¼æƒ³æ³•æˆ–éœ€è¦æŒ‡æ­£çš„åœ°æ–¹ï¼Œæ­¡è¿æ‚¨ç•™è¨€æˆ–ä¾†ä¿¡ ğŸ˜„</description></item></channel></rss>